<html>

<head><title>TinyMce</title>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="../../Scripts/jquery-1.10.2.min.js"></script>
    <script language="javascript" type="text/javascript" src="./tinymce.min.js"></script>

    <script language="javascript" type="text/javascript">
     

tinymce.init({
    selector: "textarea",

    language : "zh_CN",
    plugins: [
         "advlist autolink link image lists charmap preview hr anchor pagebreak",
         "searchreplace visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
         "save table contextmenu directionality emoticons template paste textcolor codesample"
   ],

   toolbar: "fullscreen",
   statusbar: false,
  
   toolbar: "formatselect | fontselect | fontsizeselect | forecolor backcolor | bold italic | alignleft aligncenter alignright | bullist numlist outdent indent | link image | hr emoticons | codesample",


}).then(function (editors) {
            tinymce.activeEditor.shortcuts.remove('meta+s');
            tinymce.activeEditor.execCommand('mceFullScreen');
            });
    </script>

    <script vocab="1.0">
        // 取得HTML内容
        function getHtml() {
            var html = tinymce.activeEditor.getContent();
            return html;
        };
        //设置HTML内容
        function setHtml(content) {
            tinymce.activeEditor.setContent(content);
            $('#mceu_28').css("display", "none")
            $('#css').html('显示样式')
            $('#editor_ifr').contents().find("pre").attr("contenteditable", "true")
            if ($(parent.window.parent.window.document.getElementById("user")).html() == "通用账户") {
                $('#editor_ifr').contents().find("div,p,li,pre").attr("contenteditable", "false")
                $('#editor_ifr').contents().find("div,p,li,pre").css("cursor", "pointer")
                $('#mceu_27').css("display","none")
            }

        };
    </script>
    <style>
        #mceu_28{
           display:none;
        }
        #mceu_20-body div[name="shajun"] {
            cursor: pointer;
            margin-top: 5px;
            color: white;
            background-color: cadetblue;
            border-radius: 3px;
            height: 25px;
            width: 75px;
            text-align: center;
            line-height: 25px;
         
        }
    </style>
</head>


<body id="b" >


<textarea id="editor" style="border:none;"></textarea>
    <link href="../../Scripts/artDialog/css/ui-dialog.css" rel="stylesheet" />
    <script src="../../Scripts/artDialog/dist/dialog-min.js"></script>
    <script src="../../Scripts/help/main.js"></script>
    <script v="1.0">
        // 设置编辑模式
        var setMode = function (mode) {
            tinymce.activeEditor.setMode(mode);

        };

        var data = '<div>' +
            '参考网址：' +
            '<p>参考网址：</p>' +
            '<hr />' +
            '<p>&nbsp;</p>'
        window.onload = function () {
            $('#editor_ifr').contents().find("body").css("background-color","gainsboro")
            $('#mceu_21-open').attr("onclick", "Clear()")
            $('#mceu_20-body').append('<div id="css" name="shajun" class="mce-widget mce-btn mce-menubtn mce-flow-layout-item mce-last mce-btn-has-text"  onclick="Css(this)">显示样式</div>')
            var html = $('#mceu_39-body').html()
            if ($(parent.window.parent.window.document.getElementById("user")).html() != "通用账户") {
                $('#mceu_20-body').append('<div id="code" class="mce-widget mce-btn mce-menubtn mce-flow-layout-item mce-last mce-btn-has-text"></div>')
            }
            $('#mceu_20-body').append('<div name="shajun" class="mce-widget mce-btn mce-menubtn mce-flow-layout-item mce-last mce-btn-has-text"  onclick="file()">文件管理</div>')
            $('#mceu_20-body').append('<div  name="shajun" class="mce-widget mce-btn mce-menubtn mce-flow-layout-item mce-last mce-btn-has-text"  onclick="copy()">选择复制</div>')
            $('#code').html(html)
            $('#mceu_39-body').remove();
            setHtml(data)
        }
        Clear = function () {
            setTimeout(function () {
                if (getHtml() == "") {
                    setHtml(data);
                }
                $(window.parent.parent.document.getElementById("title")).val('')

            }, 1000)



        }

        Css = function (e) {
            if ($(e).html() == "显示样式") {
                $('#mceu_28').css("display", "block")
                $(e).html('隐藏样式')
            } else {
                $('#mceu_28').css("display", "none")
                $(e).html('显示样式')
            }
        }

        file = function () {
            openDialog("/FileManage/Index","文件上传")
        }
        copy = function () {
            $('#editor_ifr').contents().find("pre").attr("contenteditable", "true")
        }
    </script>

</body>
</html> 